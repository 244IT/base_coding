{"version":3,"file":"vue.js","sources":["../../src/utils.js","../../src/observe.js","../../src/state.js","../../src/init.js","../../src/index.js"],"sourcesContent":["export function isObject(data) {\r\n  return typeof data === \"object\" && data !== null\r\n}","import {isObject} from './utils.js'\r\n\r\nclass Observer{\r\n  constructor(data) {\r\n    console.log(data, '-----')\r\n    this.walk(data)\r\n  }\r\n\r\n  walk(data) {  //在原型上添加方法，遍历对象属性\r\n    // 判断如果是数组\r\n    if(Array.isArray(data)) {\r\n      // 函数劫持，重写数组函数\r\n      \r\n\r\n    }else{\r\n      Object.keys(data).forEach((item) => {\r\n        defineReactive(data, item, data[item])\r\n      })\r\n    } \r\n  }\r\n}\r\n// 给所有的对象属性定义get 和 set\r\nfunction defineReactive(data, item, value) {\r\n  observe(value) //如果传入的对象属性还是对象\r\n  Object.defineProperty(data, item, {\r\n    set(newValue) {\r\n      if(newValue === value) return\r\n      observe(newValue) // 如果是用户后添加的对象\r\n      value = newValue \r\n    },\r\n    get() {\r\n      return value\r\n    }\r\n  })\r\n}\r\n\r\nexport function observe(data) {\r\n\r\n  //  对象就是使用definePropety实现响应式\r\n  if(!isObject(data)) {\r\n    return\r\n  }\r\n  return new Observer(data)\r\n}","import {observe} from './observe.js'\r\n\r\nexport function initState(vm) {\r\n  const opt = vm.$option\r\n  console.log(opt)\r\n  if(opt.props) {\r\n    initProps(vm)\r\n  }\r\n\r\n  if(opt.methods) {\r\n    initMethods(vm)\r\n  }\r\n\r\n  if(opt.data) {\r\n    initDate(vm)\r\n  }\r\n}\r\n\r\nfunction initDate(vm) {\r\n  // 数据响应式原理\r\n  let data = vm.$option.data\r\n\r\n  data = vm._data =  typeof data === \"function\" ? data.call(vm) : data\r\n  observe(data)\r\n}","import {initState} from './state.js'\r\n\r\nexport function initMixin(Vue) {\r\n  Vue.prototype._init = function(option) {\r\n\r\n    const vm = this\r\n    vm.$option = option\r\n    initState(vm)\r\n  }\r\n}","import {initMixin} from './init.js'\r\n\r\nfunction Vue(option) {\r\n  this._init(option)\r\n}\r\n\r\ninitMixin(Vue)\r\n\r\nexport default Vue"],"names":["isObject","data","Observer","console","log","walk","Array","isArray","Object","keys","forEach","item","defineReactive","value","observe","defineProperty","set","newValue","get","initState","vm","opt","$option","props","initProps","methods","initMethods","initDate","_data","call","initMixin","Vue","prototype","_init","option"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAO,SAASA,QAAT,CAAkBC,IAAlB,EAAwB;EAC7B,SAAO,QAAOA,IAAP,MAAgB,QAAhB,IAA4BA,IAAI,KAAK,IAA5C;EACD;;MCAKC;EACJ,oBAAYD,IAAZ,EAAkB;EAAA;;EAChBE,IAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ,EAAkB,OAAlB;EACA,SAAKI,IAAL,CAAUJ,IAAV;EACD;;;;2BAEIA,MAAM;EAAG;EACZ;EACA,UAAGK,KAAK,CAACC,OAAN,CAAcN,IAAd,CAAH,EAAwB,CAAxB,MAIK;EACHO,QAAAA,MAAM,CAACC,IAAP,CAAYR,IAAZ,EAAkBS,OAAlB,CAA0B,UAACC,IAAD,EAAU;EAClCC,UAAAA,cAAc,CAACX,IAAD,EAAOU,IAAP,EAAaV,IAAI,CAACU,IAAD,CAAjB,CAAd;EACD,SAFD;EAGD;EACF;;;;;;;EAGH,SAASC,cAAT,CAAwBX,IAAxB,EAA8BU,IAA9B,EAAoCE,KAApC,EAA2C;EACzCC,EAAAA,OAAO,CAACD,KAAD,CAAP,CADyC;;EAEzCL,EAAAA,MAAM,CAACO,cAAP,CAAsBd,IAAtB,EAA4BU,IAA5B,EAAkC;EAChCK,IAAAA,GADgC,eAC5BC,QAD4B,EAClB;EACZ,UAAGA,QAAQ,KAAKJ,KAAhB,EAAuB;EACvBC,MAAAA,OAAO,CAACG,QAAD,CAAP,CAFY;;EAGZJ,MAAAA,KAAK,GAAGI,QAAR;EACD,KAL+B;EAMhCC,IAAAA,GANgC,iBAM1B;EACJ,aAAOL,KAAP;EACD;EAR+B,GAAlC;EAUD;;EAEM,SAASC,OAAT,CAAiBb,IAAjB,EAAuB;EAE5B;EACA,MAAG,CAACD,QAAQ,CAACC,IAAD,CAAZ,EAAoB;EAClB;EACD;;EACD,SAAO,IAAIC,QAAJ,CAAaD,IAAb,CAAP;EACD;;ECzCM,SAASkB,SAAT,CAAmBC,EAAnB,EAAuB;EAC5B,MAAMC,GAAG,GAAGD,EAAE,CAACE,OAAf;EACAnB,EAAAA,OAAO,CAACC,GAAR,CAAYiB,GAAZ;;EACA,MAAGA,GAAG,CAACE,KAAP,EAAc;EACZC,IAAAA,SAAS,CAACJ,EAAD,CAAT;EACD;;EAED,MAAGC,GAAG,CAACI,OAAP,EAAgB;EACdC,IAAAA,WAAW,CAACN,EAAD,CAAX;EACD;;EAED,MAAGC,GAAG,CAACpB,IAAP,EAAa;EACX0B,IAAAA,QAAQ,CAACP,EAAD,CAAR;EACD;EACF;;EAED,SAASO,QAAT,CAAkBP,EAAlB,EAAsB;EACpB;EACA,MAAInB,IAAI,GAAGmB,EAAE,CAACE,OAAH,CAAWrB,IAAtB;EAEAA,EAAAA,IAAI,GAAGmB,EAAE,CAACQ,KAAH,GAAY,OAAO3B,IAAP,KAAgB,UAAhB,GAA6BA,IAAI,CAAC4B,IAAL,CAAUT,EAAV,CAA7B,GAA6CnB,IAAhE;EACAa,EAAAA,OAAO,CAACb,IAAD,CAAP;EACD;;ECtBM,SAAS6B,SAAT,CAAmBC,GAAnB,EAAwB;EAC7BA,EAAAA,GAAG,CAACC,SAAJ,CAAcC,KAAd,GAAsB,UAASC,MAAT,EAAiB;EAErC,QAAMd,EAAE,GAAG,IAAX;EACAA,IAAAA,EAAE,CAACE,OAAH,GAAaY,MAAb;EACAf,IAAAA,SAAS,CAACC,EAAD,CAAT;EACD,GALD;EAMD;;ECPD,SAASW,GAAT,CAAaG,MAAb,EAAqB;EACnB,OAAKD,KAAL,CAAWC,MAAX;EACD;;EAEDJ,SAAS,CAACC,GAAD,CAAT;;;;;;;;"}